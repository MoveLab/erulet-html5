/* jquery.localizandroid.js | (c) 2014 Jordi LÃ³pez | http://opensource.org/licenses/mit-license.php */
(function($){$.fn.localizandroid=function(options){var LIBRARY_NAME="localizandroid.js";$.mobile.loading("show",{text:"initializing",textVisible:true,theme:"b",html:""});var lang=getLanguage(options);console.log(LIBRARY_NAME+" Language is: "+lang);var langCode="-"+lang;var strings=$(".localizable").get();var stringCount=(strings===undefined)?0:strings.length;console.log(LIBRARY_NAME+" Resources found: "+stringCount);var i=0;$.ajax({type:"GET",url:"strings/values"+langCode+"/strings.xml",dataType:"xml",cache:"true",success:function(xml){$(strings).each(function(index,value){if($(value).data().lclstring!=undefined){var sName=$(value).data("lclstring");var sText=$(xml).find('string[name="'+sName+'"]').text();sText=sText.replace(/\\/g,"");sText=sText.replace(/u0020/g,"");$(value).html(sText)}if($(value).data().lclstringarray!=undefined){var sName=$(value).data("lclstringarray");var sArr=$(xml).find('string-array[name="'+sName+'"]');var sPos=$(value).data("lclstringarraypos");var sText=sArr.find("item")[sPos].textContent;sText=sText.replace(/\\/g,"");$(value).html(sText)}i++;if(i==stringCount){$.mobile.loading("hide")}})}})};function getLanguage(options){var lang;if(options.forceLanguage==""){lang=navigator.language||navigator.userLanguage;lang=lang.substr(0,2)}else{lang=options.forceLanguage}if($.inArray(lang,options.langCodes)==-1||lang==null){lang=options.defaultCode}return lang}})(jQuery);